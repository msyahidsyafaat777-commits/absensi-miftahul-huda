<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Scanner Absensi</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
  <h2>Scanner Absensi</h2>
  <p>MI Miftahul Huda â€” Guru buka halaman ini, lalu scan QR siswa dengan kamera.</p>

  <div id="reader" style="width:300px;"></div>
  <h3>Hasil scan terakhir:</h3>
  <div id="result">Belum ada.</div>

  <script>
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyBw_fVU6JCwCA0nwbruUH-sMAwjUemoU87Ffhw50BmCCaqAHKuQGV_vP_PRWAPE8epfg/exec";    function sendToSheet(id) {
      fetch(`${WEB_APP_URL}?id=${id}`)
        .then(res => res.text())
        .then(txt => document.getElementById('result').innerText = txt)
        .catch(err => document.getElementById('result').innerText = "Error koneksi: " + err);
    }

    function onScanSuccess(decodedText) {
      sendToSheet(decodedText);
    }

    const html5QrCode = new Html5Qrcode("reader");
    html5QrCode.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      onScanSuccess
    );
  </script>
</body>
</html>
